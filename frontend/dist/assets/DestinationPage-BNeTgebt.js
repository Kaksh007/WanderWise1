import{c as b,u as z,j as e,z as h,M as u,L as V,B as y,C}from"./index-CcwbiuT9.js";import{r as x,f as F,u as H}from"./vendor-DqtifiDA.js";import{S as j,E as I}from"./ErrorMessage-vOuyS6JP.js";import{b as w}from"./bookmarkService-EKV182DB.js";import{a as S}from"./api-DKuqC_Wc.js";import{C as g}from"./Card-C4ANwQxD.js";import{B as p}from"./Badge-D_1RR83l.js";import{t as U}from"./topDestinationsService-DJBqoKYQ.js";import{m as f}from"./motion-DAOu6aZ3.js";import{C as E}from"./calendar-D4Gk9f1j.js";import"./utils-CqJj1_54.js";/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=b("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=b("Hotel",[["path",{d:"M18 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2Z",key:"p9z69c"}],["path",{d:"m9 16 .348-.24c1.465-1.013 3.84-1.013 5.304 0L15 16",key:"1bvcvh"}],["path",{d:"M8 7h.01",key:"1vti4s"}],["path",{d:"M16 7h.01",key:"1kdx03"}],["path",{d:"M12 7h.01",key:"1ivr5q"}],["path",{d:"M12 11h.01",key:"z322tv"}],["path",{d:"M16 11h.01",key:"xkw8gn"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M10 22v-6.5m4 0V22",key:"16gs4s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=b("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=b("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);function M({destinationId:s,destinationName:l}){const{user:t}=z(),[a,r]=x.useState(!1),[c,i]=x.useState(!1);x.useEffect(()=>{let m=!0;return(async()=>{if(!t){m&&r(!1);return}try{const v=await w.getBookmarks();if(!m)return;const o=v.some(d=>d.destinationId===s);r(o)}catch{}})(),()=>{m=!1}},[t,s]);const n=async()=>{if(!t){h.error("Please login to bookmark destinations");return}i(!0);try{a?(await w.removeBookmark(s),r(!1),h.success("Bookmark removed")):(await w.addBookmark(s,l),r(!0),h.success("Bookmarked!"))}catch(m){h.error(m.message||"Failed to update bookmark")}finally{i(!1)}};return e.jsx("button",{onClick:n,disabled:c||!t,className:`px-4 py-2 rounded ${a?"bg-yellow-500 text-white hover:bg-yellow-600":"bg-gray-200 text-gray-700 hover:bg-gray-300"} disabled:opacity-50`,children:a?"â˜… Bookmarked":"â˜† Bookmark"})}const A={async submitFeedback(s){return await S.post("/feedback",s)}};function Z({recommendationId:s}){const{user:l}=z(),[t,a]=x.useState(null),[r,c]=x.useState(!1),i=async n=>{if(!l){h.error("Please login to provide feedback");return}c(!0);try{await A.submitFeedback({recommendationId:s,rating:n}),a(n),h.success("Thank you for your feedback!")}catch(m){h.error(m.message||"Failed to submit feedback")}finally{c(!1)}};return e.jsxs("div",{className:"mt-6",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"Was this recommendation helpful?"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>i(1),disabled:r||!l||t===1,className:`px-4 py-2 rounded ${t===1?"bg-green-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"} disabled:opacity-50`,children:"ðŸ‘ Helpful"}),e.jsx("button",{onClick:()=>i(-1),disabled:r||!l||t===-1,className:`px-4 py-2 rounded ${t===-1?"bg-red-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"} disabled:opacity-50`,children:"ðŸ‘Ž Not Helpful"})]})]})}function G({place:s}){return e.jsxs(g,{hover:!0,className:"h-full border-l-4 border-l-primary-500",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-2",children:s.name}),e.jsx("p",{className:"text-gray-600 text-sm mb-3 leading-relaxed",children:s.description}),s.category&&e.jsx(p,{variant:"primary",size:"sm",children:s.category})]})}function W({restaurant:s}){const l=a=>{switch(a==null?void 0:a.toLowerCase()){case"low":return"success";case"medium":return"warning";case"high":return"error";default:return"default"}},t=a=>{if(!a)return null;const r=Math.floor(a),c=a%1>=.5,i=[];for(let n=0;n<r;n++)i.push(e.jsx(j,{className:"h-4 w-4 text-yellow-400 fill-current"},n));return c&&i.push(e.jsx(j,{className:"h-4 w-4 text-yellow-400 fill-current opacity-50"},"half")),e.jsx("div",{className:"flex items-center gap-0.5",children:i})};return e.jsxs(g,{hover:!0,className:"h-full",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 flex-1",children:s.name}),s.rating&&e.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[t(s.rating),e.jsx("span",{className:"text-sm text-gray-600 font-medium",children:s.rating.toFixed(1)})]})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-3 leading-relaxed",children:s.description}),e.jsxs("div",{className:"flex flex-wrap gap-2 items-center mb-2",children:[s.cuisine&&e.jsx(p,{variant:"primary",size:"sm",children:s.cuisine}),s.priceRange&&e.jsx(p,{variant:l(s.priceRange),size:"sm",children:s.priceRange.toUpperCase()})]}),s.location&&e.jsxs("div",{className:"flex items-center text-xs text-gray-500 mt-2",children:[e.jsx(u,{className:"h-3 w-3 mr-1"}),e.jsx("span",{children:s.location})]})]})}function J({stay:s}){const l=a=>{switch(a==null?void 0:a.toLowerCase()){case"low":return"success";case"medium":return"warning";case"high":return"error";default:return"default"}},t=a=>{if(!a)return null;const r=Math.floor(a),c=a%1>=.5,i=[];for(let n=0;n<r;n++)i.push(e.jsx(j,{className:"h-4 w-4 text-yellow-400 fill-current"},n));return c&&i.push(e.jsx(j,{className:"h-4 w-4 text-yellow-400 fill-current opacity-50"},"half")),e.jsx("div",{className:"flex items-center gap-0.5",children:i})};return e.jsxs(g,{hover:!0,className:"h-full",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 flex-1",children:s.name}),s.rating&&e.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[t(s.rating),e.jsx("span",{className:"text-sm text-gray-600 font-medium",children:s.rating.toFixed(1)})]})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-3 leading-relaxed",children:s.description}),e.jsxs("div",{className:"flex flex-wrap gap-2 items-center mb-2",children:[s.type&&e.jsx(p,{variant:"info",size:"sm",children:s.type}),s.priceRange&&e.jsx(p,{variant:l(s.priceRange),size:"sm",children:s.priceRange.toUpperCase()})]}),s.location&&e.jsxs("div",{className:"flex items-center text-xs text-gray-500 mt-2",children:[e.jsx(u,{className:"h-3 w-3 mr-1"}),e.jsx("span",{children:s.location})]})]})}const K={async getDestination(s){return await S.get(`/destination/${s}`)},async searchDestinations(s){return await S.get(`/destination/search?q=${encodeURIComponent(s)}`)}};function ce(){const{id:s}=F(),l=H(),[t,a]=x.useState(null),[r,c]=x.useState(null),[i,n]=x.useState(!0),[m,N]=x.useState(null);x.useEffect(()=>{window.scrollTo(0,0),v()},[s]);const v=async()=>{try{n(!0),N(null);const o=decodeURIComponent(s),d=await K.getDestination(s);if(a(d),d.image)c(d.image);else{const D=["january","february","march","april","may","june","july","august","september","october","november","december"][new Date().getMonth()];for(const P of["india","world"])try{const k=(await U.getTopDestinations(P,D)).find(T=>T.name.toLowerCase()===o.toLowerCase());if(k&&k.image){c(k.image);break}}catch{}}}catch(o){N(o.message||"Failed to fetch destination")}finally{n(!1)}};return i?e.jsx(V,{}):m?e.jsx(I,{message:m}):t?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r&&e.jsxs("div",{className:"relative h-64 md:h-96 w-full overflow-hidden",children:[e.jsx("img",{src:r,alt:t.name,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/40 to-transparent"}),e.jsx("div",{className:"absolute top-4 left-4 z-10",children:e.jsxs(y,{variant:"ghost",size:"sm",onClick:()=>l(-1),className:"bg-white/90 hover:bg-white text-gray-900",children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"Back"]})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-6 md:p-8 text-white",children:e.jsx(C,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-2",children:t.name}),e.jsxs("div",{className:"flex items-center gap-2 text-lg md:text-xl",children:[e.jsx(u,{className:"h-5 w-5"}),e.jsx("span",{children:t.country})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{destinationId:s,destinationName:t.name}),e.jsx(y,{variant:"ghost",size:"sm",className:"bg-white/20 hover:bg-white/30 text-white border-white/30",children:e.jsx(R,{className:"h-4 w-4"})})]})]})})})]}),e.jsx(C,{children:e.jsxs("div",{className:"py-8",children:[!r&&e.jsxs(y,{variant:"ghost",size:"sm",onClick:()=>l(-1),className:"mb-6",children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"Back"]}),e.jsx(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:e.jsxs(g,{className:"mb-8",padding:"lg",children:[!r&&e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:t.name}),e.jsxs("div",{className:"flex items-center gap-2 text-lg text-gray-600",children:[e.jsx(u,{className:"h-5 w-5"}),e.jsx("span",{children:t.country})]})]}),e.jsx(M,{destinationId:s,destinationName:t.name})]}),t.summary&&e.jsx("p",{className:"text-gray-700 text-lg mb-6 leading-relaxed",children:t.summary}),t.bestTimeToVisit&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-700 bg-primary-50 rounded-lg p-4",children:[e.jsx(E,{className:"h-5 w-5 text-primary-600"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold",children:"Best Time to Visit: "}),e.jsx("span",{children:t.bestTimeToVisit})]})]})]})}),t.topPlaces&&t.topPlaces.length>0&&e.jsxs(f.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},className:"mb-12",children:[e.jsxs("h2",{className:"text-3xl font-bold text-gray-900 mb-6 flex items-center gap-2",children:[e.jsx(u,{className:"h-7 w-7 text-primary-600"}),"Top 5 Places to Visit"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.topPlaces.slice(0,5).map((o,d)=>e.jsx(G,{place:o},d))})]}),t.restaurants&&t.restaurants.length>0&&e.jsxs(f.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},className:"mb-12",children:[e.jsxs("h2",{className:"text-3xl font-bold text-gray-900 mb-6 flex items-center gap-2",children:[e.jsx($,{className:"h-7 w-7 text-primary-600"}),"Top 5 Restaurants"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.restaurants.slice(0,5).map((o,d)=>e.jsx(W,{restaurant:o},d))})]}),t.stays&&t.stays.length>0&&e.jsxs(f.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},className:"mb-12",children:[e.jsxs("h2",{className:"text-3xl font-bold text-gray-900 mb-6 flex items-center gap-2",children:[e.jsx(q,{className:"h-7 w-7 text-primary-600"}),"Top 5 Property Stays"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.stays.slice(0,5).map((o,d)=>e.jsx(J,{stay:o},d))})]}),e.jsx(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:e.jsx(g,{className:"mb-6",padding:"lg",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx(y,{variant:"primary",size:"lg",onClick:()=>l("/advanced-search",{state:{prefillLocation:t.name}}),className:"flex-1",children:"Get Recommendations for this Destination"}),e.jsx(Z,{recommendationId:s})]})})}),(!t.topPlaces||t.topPlaces.length===0)&&(!t.restaurants||t.restaurants.length===0)&&(!t.stays||t.stays.length===0)&&e.jsx(g,{className:"border-warning bg-yellow-50",children:e.jsx("p",{className:"text-yellow-800 text-center",children:"Detailed information is being loaded. Please refresh the page in a moment."})})]})})]}):e.jsx("div",{children:"Destination not found"})}export{ce as default};
