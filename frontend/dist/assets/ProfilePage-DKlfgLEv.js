import{u as w,j as e,C,U as B,B as h,d as S,e as p,M as L}from"./index-CcwbiuT9.js";import{u as D,r}from"./vendor-DqtifiDA.js";import{b as E}from"./bookmarkService-EKV182DB.js";import{C as a}from"./Card-C4ANwQxD.js";import{B as j}from"./Badge-D_1RR83l.js";import"./utils-CqJj1_54.js";import"./api-DKuqC_Wc.js";function I(){var o,d,m;const i=D(),{user:s,logout:g}=w(),[n,f]=r.useState([]),[y,l]=r.useState(!0);r.useEffect(()=>{s&&v()},[s]);const v=async()=>{try{l(!0);const t=await E.getBookmarks();f(t)}catch(t){console.error("Failed to fetch bookmarks:",t)}finally{l(!1)}},u=()=>{g(),i("/")},N=r.useMemo(()=>{var x;if(!(s!=null&&s.name))return"?";const t=s.name.trim().split(" "),b=((x=t[0])==null?void 0:x[0])||"",k=t.length>1?t[t.length-1][0]:"";return(b+k).toUpperCase()},[s]),c=n.length;return e.jsx("div",{className:"min-h-screen bg-gray-50 py-10",children:e.jsxs(C,{children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-8 gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(B,{className:"h-8 w-8 text-primary-600"}),e.jsx("span",{children:"Profile"})]}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Welcome back, ",e.jsx("span",{className:"font-semibold",children:s==null?void 0:s.name}),". Manage your account and revisit your favourite destinations."]})]}),e.jsx(h,{variant:"danger",size:"md",onClick:u,leftIcon:e.jsx(S,{className:"h-4 w-4"}),children:"Logout"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[e.jsxs(a,{padding:"lg",hover:!0,children:[e.jsxs(a.Header,{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-16 w-16 rounded-full bg-primary-100 flex items-center justify-center text-2xl font-bold text-primary-700",children:N}),e.jsxs("div",{children:[e.jsxs(a.Title,{className:"flex items-center gap-2",children:[(s==null?void 0:s.name)||"Wanderer",e.jsx(j,{variant:"primary",size:"sm",children:"Explorer"})]}),e.jsx(a.Description,{children:s==null?void 0:s.email})]})]}),e.jsxs(a.Content,{className:"mt-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Saved bookmarks"}),e.jsxs("span",{className:"font-semibold text-gray-900 flex items-center gap-1",children:[e.jsx(p,{className:"h-4 w-4 text-primary-600"}),c]})]}),((o=s==null?void 0:s.prefs)==null?void 0:o.homeCountry)&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Home base"}),e.jsxs("span",{className:"font-semibold text-gray-900 flex items-center gap-1",children:[e.jsx(L,{className:"h-4 w-4 text-primary-600"}),s.prefs.homeCountry]})]}),((m=(d=s==null?void 0:s.prefs)==null?void 0:d.travelStyles)==null?void 0:m.length)>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-500",children:"Travel styles"}),e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:s.prefs.travelStyles.map(t=>e.jsx(j,{variant:"info",size:"sm",children:t},t))})]})]})]}),e.jsxs(a,{padding:"md",children:[e.jsx(a.Title,{className:"text-lg",children:"Account tips"}),e.jsxs(a.Content,{className:"mt-3 space-y-2 text-sm text-gray-600",children:[e.jsx("p",{children:"• Bookmark destinations you love to quickly revisit them later."}),e.jsx("p",{children:"• Use your profile to discover and refine your travel preferences."})]})]})]}),e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs(a,{padding:"lg",children:[e.jsx(a.Header,{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx(a.Title,{children:"Saved Bookmarks"}),e.jsx(a.Description,{children:"All the destinations you’ve marked to explore or revisit later."})]})}),e.jsx(a.Content,{children:y?e.jsx("div",{className:"py-10 text-center text-gray-500",children:"Loading your bookmarks..."}):c===0?e.jsxs("div",{className:"py-10 text-center text-gray-500",children:["You haven't bookmarked any destinations yet.",e.jsx("br",{}),e.jsx(h,{variant:"primary",size:"sm",className:"mt-4",onClick:()=>i("/"),children:"Explore destinations"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.map(t=>e.jsxs("div",{className:"group border border-gray-100 rounded-xl p-4 bg-white hover:bg-primary-50/60 hover:border-primary-200 transition-all cursor-pointer flex flex-col justify-between",onClick:()=>i(`/destination/${t.destinationId}`),children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(p,{className:"h-4 w-4 text-primary-600"}),t.destinationName||"Destination"]}),t.note&&e.jsx("p",{className:"mt-1 text-sm text-gray-600 line-clamp-2",children:t.note})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-between text-xs text-gray-400",children:[e.jsxs("span",{children:["Saved on"," ",new Date(t.createdAt).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})]}),e.jsx("span",{className:"group-hover:text-primary-700 font-medium",children:"View details →"})]})]},t._id))})})]})})]})]})})}export{I as default};
